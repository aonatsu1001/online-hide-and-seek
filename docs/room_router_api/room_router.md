# ルーム管理API仕様書

## 概要
このドキュメントは、オンラインかくれんぼゲームにおけるルームの作成、参加、マッチング開始に関するAPIエンドポイントの詳細を記述します。

## ベースURL
`http://localhost:8000/room`

## エンドポイント

### 1. ルーム作成
- **パス:** `/create_room`
- **HTTPメソッド:** `POST`
- **目的:** 新しいゲームルームを作成します。
- **リクエストボディ:** なし
- **レスポンス:**
    - **ステータスコード:** `200 OK`
    - **ボディ:**
        ```json
        {
          "room_id": "string" // 生成された一意のルームID
        }
        ```
    - **説明:** 成功すると、新しく作成されたルームの一意のIDが返されます。このIDは、他のプレイヤーをルームに招待したり、自身がルームに参加したりするために使用します。

### 2. ルーム参加
- **パス:** `/join_room/{room_id}`
- **HTTPメソッド:** `POST`
- **目的:** 既存のゲームルームにプレイヤーを参加させます。
- **パスパラメータ:**
    - `room_id` (string, 必須): 参加したいルームの一意のID。
- **クエリパラメータ:**
    - `user_id` (string, 必須): ルームに参加するプレイヤーのID（ユーザー名など）。
- **レスポンス:**
    - **ステータスコード:** `200 OK`
    - **ボディ:**
        ```json
        {
          "message": "string" // 参加成功メッセージ
        }
        ```
    - **ステータスコード:** `404 Not Found`
    - **ボディ:**
        ```json
        {
          "detail": "Room not found"
        }
        ```
    - **説明:** 指定された`room_id`のルームに`user_id`のプレイヤーが追加されます。ルームが見つからない場合はエラーが返されます。

### 3. マッチング開始
- **パス:** `/start_matching`
- **HTTPメソッド:** `POST`
- **目的:** プレイヤーがマッチングを開始したことをサーバーに通知します。
- **クエリパラメータ:**
    - `user_id` (string, 必須): マッチングを開始するプレイヤーのID（ユーザー名など）。
- **レスポンス:**
    - **ステータスコード:** `200 OK`
    - **ボディ:**
        ```json
        {
          "message": "string" // マッチング開始メッセージ
        }
        ```
    - **説明:** 現時点では、プレイヤーがマッチングを開始したことを示すメッセージを返します。将来的には、このエンドポイントが呼び出されると、サーバーは待機中のプレイヤーをキューに入れ、2人揃ったら自動的にルームを作成し、プレイヤーをそのルームに割り当てるなどのマッチングロジックが実装される予定です。

## エラーハンドリング
- APIリクエストが失敗した場合、HTTPステータスコードとJSON形式のエラーメッセージが返されます。
- 例: ルームが見つからない場合は `404 Not Found` と `{"detail": "Room not found"}` が返されます。
